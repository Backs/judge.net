@model Judge.Application.ViewModels.Contests.ContestResult.ContestResultViewModel
@{
    ViewBag.Title = "Результаты";
    Layout = "~/Views/Shared/_Layout.cshtml";
    var index = 0;
}

<h2>@ViewBag.Title</h2>

<div class="container">
    <table class="table table-striped">
        <thead>
        <tr>
            <th>Место</th>
            <th>Участник</th>
            @foreach (var task in Model.Tasks)
            {
                <th>
                    @Html.ActionLink(task.Label, "Task", new {contestId = Model.ContestId, label = task.Label})
                </th>
            }
            <th>Решено</th>
            <th>Время</th>
        </tr>
        </thead>
        <tbody>
            @foreach (var user in Model.Users)
            {
                <tr>
                    <td>@(++index)</td>
                    <td>@user.UserName</td>
                    @foreach (var task in Model.Tasks)
                    {
                        <td>
                            @{
                                var s = user.Tasks.FirstOrDefault(o => o.ProblemId == task.ProblemId);
                            }
                            @if (s != null)
                            {
                                @s.ToString()
                            }
                        </td>
                    }
                    <td>@user.SolvedCount</td>
                    <td>@user.Time</td>
                </tr>
            }
        </tbody>
    </table>
</div>